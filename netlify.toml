[build]
  command = "hugo mod get && npm run build:tools && hugo --minify && npm run submit:indexnow"
  publish = "public"
  functions = "netlify/functions"

[build.environment]
  HUGO_VERSION = "0.151.0"
  HUGO_EXTENDED = "true"
  NODE_VERSION = "20"

[context.production]
  command = "hugo mod get && npm run build:tools && hugo --minify && npm run submit:indexnow"
  publish = "public"

[context.deploy-preview]
  command = "hugo mod get && npm run build:tools && hugo --minify --buildFuture"
  publish = "public"

[context.branch-deploy]
  command = "hugo mod get && npm run build:tools && hugo --minify"
  publish = "public"

# Netlify Functions
[[redirects]]
  from = "/blog_utilities_sitemap.xml"
  to = "/.netlify/functions/sitemap-proxy"
  status = 200